<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fake (GPU) device file generator &mdash; Intel® Device Plugins for Kubernetes  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Intel® Device Plugins for Kubernetes
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../README.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../DEVEL.html">Instructions for Device Plugin Development and Maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/extensions.html">Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../demo/readme.html">Demo</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/intel/intel-device-plugins-for-kubernetes">Project GitHub repository</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Intel® Device Plugins for Kubernetes</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Fake (GPU) device file generator</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/cmd/gpu_fakedev/README.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="fake-gpu-device-file-generator">
<h1>Fake (GPU) device file generator<a class="headerlink" href="#fake-gpu-device-file-generator" title="Permalink to this heading"></a></h1>
<p>Table of Contents</p>
<ul class="simple">
<li><p><a class="reference external" href="#introduction">Introduction</a></p></li>
<li><p><a class="reference external" href="#configuration">Configuration</a></p></li>
<li><p><a class="reference external" href="#potential-improvements">Potential improvements</a></p></li>
<li><p><a class="reference external" href="#related-tools">Related tools</a></p></li>
</ul>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading"></a></h2>
<p>This is a tool for generating (large number of) fake device files for
k8s device scheduling scalability testing.  But it can also be used
just to test (GPU) device plugin functionality without having
corresponding device HW.</p>
<p>Its “intel-gpu-fakedev” container is intended to be run as first init
container in a device plugin pod, so that device plugin (and its NFD
labeler) see the fake (sysfs + devfs) files generated by the tool,
instead of real host sysfs and devfs content.</p>
</section>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/intel/intel-device-plugins-for-kubernetes/tree/d654009464f1da34376500262ad810f4f3053b13/cmd/gpu_fakedev/configs/">Configs</a> subdirectory contains example JSON configuration
file(s) for the generator. Currently there’s only one example JSON
file, but each new device variant adding feature(s) that have specific
support in device plugin, could have their own fake device config.</p>
</section>
<section id="potential-improvements">
<h2>Potential improvements<a class="headerlink" href="#potential-improvements" title="Permalink to this heading"></a></h2>
<p>If support for mixed device environment is needed, tool can be updated
to use node / configuration file mapping.  Such mappings could be e.g.
in configuration files themselves as node name include / exlude lists,
and tool would use first configuration file matching the node it’s
running on.  For now, one would need to use different pod / config
specs for different nodes to achieve that…</p>
<p>Currently JSON config file options and the generated files are tied to
what GPU plugin uses, but if needed, they could be changed to fake
also sysfs + devfs device files used by other plugins.</p>
</section>
<section id="related-tools">
<h2>Related tools<a class="headerlink" href="#related-tools" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="#https://github.com/intel/fakedev-exporter">fakedev-exporter</a> project
can be used to schedule suitably configured fake workloads on the fake
devices, and to provide provide fake activity metrics for them to
Prometheus, that look like they were reported by real Prometheus
metric exporters for real workloads running on real devices.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, various.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>